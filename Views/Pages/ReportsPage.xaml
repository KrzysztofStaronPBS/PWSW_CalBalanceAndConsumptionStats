<Page
    x:Class="PWSW_CalBalanceAndConsumptionStats.Views.Pages.ReportsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:models="using:PWSW_CalBalanceAndConsumptionStats.Models">

	<Page.Resources>
		<ResourceDictionary>
			<converters:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter" 
                xmlns:converters="using:PWSW_CalBalanceAndConsumptionStats.Converters"/>
		</ResourceDictionary>
	</Page.Resources>

	<Grid Padding="40">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="*"/>
			<ColumnDefinition Width="320"/>
		</Grid.ColumnDefinitions>

		<StackPanel Grid.Row="0" Grid.ColumnSpan="2" Orientation="Horizontal" Spacing="15" Margin="0,0,0,20">
			<Button Command="{x:Bind ViewModel.GoBackCommand}" 
                    Content="&#xE72B;" 
                    FontFamily="Segoe MDL2 Assets" 
                    FontSize="16"
                    Width="40" Height="40"
                    ToolTipService.ToolTip="PowrÃ³t do menu"/>
			<TextBlock Text="Raporty i Statystyki" FontSize="28" FontWeight="Bold" VerticalAlignment="Center"/>
		</StackPanel>

		<ListView Grid.Row="1" Grid.Column="0" ItemsSource="{x:Bind ViewModel.ReportEntries, Mode=OneWay}" Margin="0,0,20,0">
			<ListView.Header>
				<Grid Padding="12,0" Background="{ThemeResource SystemControlBackgroundChromeMediumBrush}">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="100"/>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>
					<TextBlock Text="Data" FontWeight="Bold"/>
					<TextBlock Grid.Column="1" Text="Zjedzone" FontWeight="Bold"/>
					<TextBlock Grid.Column="2" Text="Spalone" FontWeight="Bold"/>
					<TextBlock Grid.Column="3" Text="Bilans" FontWeight="Bold"/>
				</Grid>
			</ListView.Header>
			<ListView.ItemTemplate>
				<DataTemplate x:DataType="models:ReportDay">
					<Grid Padding="0,10">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="100"/>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>
						<TextBlock Text="{x:Bind FormattedDate}"/>
						<TextBlock Grid.Column="1" Text="{x:Bind Eaten}" Foreground="#FF5C6BC0"/>
						<TextBlock Grid.Column="2" Text="{x:Bind Burned}" Foreground="#E81123"/>
						<TextBlock Grid.Column="3" Text="{x:Bind Balance}" FontWeight="Bold"/>
					</Grid>
				</DataTemplate>
			</ListView.ItemTemplate>
		</ListView>

		<StackPanel Grid.Row="1" Grid.Column="1" Spacing="20" Background="{ThemeResource LayerFillColorDefaultBrush}" Padding="20" CornerRadius="8" VerticalAlignment="Top">
			<TextBlock Text="Konfiguracja raportu" FontSize="18" FontWeight="SemiBold"/>

			<CalendarDatePicker Date="{x:Bind ViewModel.StartDate, Mode=TwoWay}" Header="Od" HorizontalAlignment="Stretch"/>
			<CalendarDatePicker Date="{x:Bind ViewModel.EndDate, Mode=TwoWay}" Header="Do" HorizontalAlignment="Stretch"/>

			<Button Content="Generuj dane" Command="{x:Bind ViewModel.GenerateReportCommand}" 
                    Style="{StaticResource AccentButtonStyle}" HorizontalAlignment="Stretch"/>

			<MenuFlyoutSeparator/>

			<Button Content="Eksportuj do CSV" 
				Command="{x:Bind ViewModel.ExportToCSVCommand}"
				CommandParameter="{x:Bind Content.XamlRoot, Mode=OneWay}"
				HorizontalAlignment="Stretch" 
				Background="#FF4DB6AC" 
				Foreground="White"/>
		</StackPanel>
	</Grid>
</Page>