<Page
    x:Class="PWSW_CalBalanceAndConsumptionStats.Views.Pages.ProfilePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

	<Page.Resources>
		<ResourceDictionary>
			<converters:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter" 
                xmlns:converters="using:PWSW_CalBalanceAndConsumptionStats.Converters"/>
		</ResourceDictionary>
	</Page.Resources>

	<Grid Padding="40">
		<StackPanel Spacing="20" MaxWidth="600" HorizontalAlignment="Left">

			<Grid Margin="0,0,0,20">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>

				<StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="15">
					<Button Command="{x:Bind ViewModel.GoBackCommand}" Content="&#xE72B;" FontFamily="Segoe MDL2 Assets" Width="40" Height="40"/>
					<TextBlock Text="Mój Profil" FontSize="28" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,20,0"/>
				</StackPanel>

				<Button Grid.Column="1" VerticalAlignment="Center" 
                        Command="{x:Bind ViewModel.ToggleEditCommand}"
                        Visibility="{x:Bind ViewModel.IsEditing, Mode=OneWay, Converter={StaticResource InverseBoolToVisibilityConverter}}">
					<StackPanel Orientation="Horizontal" Spacing="8">
						<FontIcon Glyph="&#xE70F;" FontSize="14"/>
						<TextBlock Text="Edytuj dane"/>
					</StackPanel>
				</Button>
			</Grid>

			<Border Background="{ThemeResource LayerFillColorDefaultBrush}" 
                    Padding="20" CornerRadius="8" BorderThickness="1" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}">
				<StackPanel Spacing="10">
					<TextBlock Text="Informacje o koncie" FontSize="18" FontWeight="SemiBold"/>
					<Grid RowSpacing="8">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="100"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>

						<StackPanel Grid.Column="0" Spacing="8">
							<TextBlock Text="Użytkownik:" Foreground="Gray"/>
							<TextBlock Text="Płeć:" Foreground="Gray"/>
							<TextBlock Text="Wiek:" Foreground="Gray" VerticalAlignment="Center" Height="32"/>
						</StackPanel>

						<StackPanel Grid.Column="1" Spacing="8">
							<TextBlock Text="{x:Bind ViewModel.CurrentUser.Name, Mode=OneWay}" FontWeight="Medium"/>

							<TextBlock Text="{x:Bind ViewModel.DisplayGender, Mode=OneWay}" FontWeight="Medium"/>

							<StackPanel Orientation="Horizontal" Spacing="5">
								<TextBlock Text="{x:Bind ViewModel.CurrentUser.Age, Mode=OneWay}" FontWeight="Medium" VerticalAlignment="Center"
                                           Visibility="{x:Bind ViewModel.IsEditing, Mode=OneWay, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
								<TextBox Text="{x:Bind ViewModel.EditAge, Mode=TwoWay}" Width="80"
                                         Visibility="{x:Bind ViewModel.IsEditing, Mode=OneWay}"/>
								<TextBlock Text="lat" Foreground="Gray" VerticalAlignment="Center"/>
							</StackPanel>
						</StackPanel>
					</Grid>
				</StackPanel>
			</Border>

			<Border Background="{ThemeResource LayerFillColorDefaultBrush}" 
                    Padding="20" CornerRadius="8" BorderThickness="1" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}">
				<StackPanel Spacing="15">
					<TextBlock Text="Parametry fizyczne" FontSize="18" FontWeight="SemiBold"/>

					<Grid ColumnSpacing="30">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>

						<StackPanel Grid.Column="0">
							<TextBlock Text="Wzrost (m)" Foreground="Gray" FontSize="12"/>
							<TextBlock Text="{x:Bind ViewModel.CurrentUser.Height, Mode=OneWay}" FontSize="20" FontWeight="Bold" 
                                       Visibility="{x:Bind ViewModel.IsEditing, Mode=OneWay, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
							<TextBox Text="{x:Bind ViewModel.EditHeight, Mode=TwoWay}" 
                                     Visibility="{x:Bind ViewModel.IsEditing, Mode=OneWay}" Margin="0,5,0,0"/>
						</StackPanel>

						<StackPanel Grid.Column="1">
							<TextBlock Text="Waga (kg)" Foreground="Gray" FontSize="12"/>
							<TextBlock Text="{x:Bind ViewModel.CurrentUser.Weight, Mode=OneWay}" FontSize="20" FontWeight="Bold" 
                                       Visibility="{x:Bind ViewModel.IsEditing, Mode=OneWay, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
							<TextBox Text="{x:Bind ViewModel.EditWeight, Mode=TwoWay}" 
                                     Visibility="{x:Bind ViewModel.IsEditing, Mode=OneWay}" Margin="0,5,0,0"/>
						</StackPanel>

						<StackPanel Grid.Column="2">
							<TextBlock Text="BMI" Foreground="Gray" FontSize="12"/>
							<TextBlock Text="{x:Bind ViewModel.CurrentUser.BMI, Mode=OneWay}" FontSize="20" FontWeight="Bold"/>
							<TextBlock Text="{x:Bind ViewModel.BmiStatus, Mode=OneWay}" FontSize="12" Foreground="#FF26A69A" FontWeight="SemiBold"/>
						</StackPanel>
					</Grid>

					<StackPanel Orientation="Horizontal" Spacing="10" Visibility="{x:Bind ViewModel.IsEditing, Mode=OneWay}" Margin="0,10,0,0">
						<Button Content="Zapisz zmiany" Command="{x:Bind ViewModel.SaveChangesCommand}" Style="{StaticResource AccentButtonStyle}"/>
						<Button Content="Anuluj" Command="{x:Bind ViewModel.ToggleEditCommand}"/>
					</StackPanel>
				</StackPanel>
			</Border>

			<StackPanel Orientation="Horizontal" Spacing="10" Margin="0,20,0,0">
				<Button Content="Wyloguj" Command="{x:Bind ViewModel.LogoutCommand}" Width="120"/>
				<Button Content="Usuń Konto" Command="{x:Bind ViewModel.DeleteAccountCommand}" Background="#FFF44336" Foreground="White" Width="120"/>
			</StackPanel>
		</StackPanel>
	</Grid>
</Page>